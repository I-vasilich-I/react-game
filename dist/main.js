(()=>{"use strict";var e={9057:(e,t,n)=>{var r=n(7294),o=n(3935);const a=function(e){var t=e.history,n=e.boardSize,o=t[t.length-1].board,a={4:"tile",3:"tile tile--3",5:"tile tile--5",6:"tile tile--6"},l="board".concat(4!==n?" board-".concat(n):""),c=function(e){return e||""};return r.createElement("main",{className:"main"},r.createElement("section",{className:l},o.map((function(e,t){return r.createElement("div",{key:t,className:"".concat(a[n]," tile--").concat(c(e)?c(e):0)},c(e))}))))};var l=n(7168),c=n(2046),i=n(7118),s=n(8884);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e){return JSON.parse(localStorage.getItem(e))||null},f=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},b=function(e){var t,n=function(e){if(Array.isArray(e))return u(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=function(e){return e.map((function(e,t){return e?-1:t})).filter((function(e){return-1!==e}))}(e);if(!r.length)return-1;var o,a=Math.floor(Math.random()<.8?2:4);return n[r[(o=r.length,Math.floor(Math.random()*Math.floor(o)))]]=a,n},d=function(e){return b(b(Array(e).fill(0)))};const p=function(e){var t=e.setIsPopUpActive,n=e.bestScore,o=e.boardSize,a=e.history,u=e.setHistory,m=e.stepBackButton,b=n?n[n.length-1]:0,p=a[a.length-1].score;return r.createElement("header",{className:"header"},r.createElement("div",{className:"header__top"},r.createElement("h2",{className:"logo"},"2048"),r.createElement("div",{className:"score__container"},r.createElement("div",{className:"score"},r.createElement("p",{className:"score__title"},"Score"),r.createElement("p",{className:"score__count"},p)),r.createElement("div",{className:"score"},r.createElement("p",{className:"score__title"},"Best score"),r.createElement("p",{className:"score__count"},b)))),r.createElement("div",{className:"header__bottom"},r.createElement("button",{type:"button",className:"button button--nav",onClick:function(){t(!0)}},r.createElement(s.Z,{fontSize:"inherit"})),r.createElement("button",{type:"button",className:"button button--nav",onClick:function(){var e=[{board:d(o*o),score:0,win:!1,gameOver:!1}];u(e),f("2048-history",e)}},r.createElement(c.Z,{fontSize:"inherit"})),r.createElement("button",{type:"button",className:"".concat("1"===m?"button button--nav":"button button--hidden"),onClick:function(){a.length<2||(u(a.slice(0,a.length-1)),f("2048-history",a.slice(0,a.length-1)))}},r.createElement(l.Z,{fontSize:"inherit"})),r.createElement("button",{type:"button",className:"button button--nav",onClick:function(){document.body.requestFullscreen()}},r.createElement(i.Z,{fontSize:"inherit"}))))};var v=n(9826),h=n(9973),y=n(1673),g=n(9594),E=n(8735);function S(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const w=function(e){var t,n,o=e.bestScore,a=e.setBestScore,l=e.boardSize,c=e.history,i=e.setHistory,s=e.setOpenWin,u=e.setOpenLose,m=e.winningNumber,d=o[o.length-1]?o[o.length-1]:0,p=c[c.length-1],w=p.board,k=p.score,_=p.win,A=p.gameOver,B=l*l,Z=0,O=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(t,n)||S(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),z=O[0],C=O[1],I=function(e){var t,n,r={resultBoard:null,winCheck:null,gameOver:null};if(n=w,e.toString()!==n.toString()){var l=b(e);r.resultBoard=-1!==l?l:e,(t=function(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r.resultBoard).sort((function(e,t){return e-t})))[t.length-1]>=m&&!_&&(r.winCheck=!0,s(!0)),K(r.resultBoard)&&(r.gameOver=(A||(u(!0),C(!1)),!0)),A||(i(c.concat({board:r.resultBoard||w,score:k+Z,win:r.winCheck||_,gameOver:r.gameOver||A})),f("2048-history",c.concat({board:r.resultBoard||w,score:k+Z,win:r.winCheck||_,gameOver:r.gameOver||A})))}var p=k+Z>d?k+Z:null;p&&(a(o.concat(p)),f("bestScore",o.concat(p)))},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.filter((function(e){return!!e}));t&&n.reverse();for(var r=0;r<n.length;r++)if(n[r]===n[r+1]){Z+=n[r]+n[r+1];var o=[n[r]+n[r+1],0];n[r]=o[0],n[r+1]=o[1]}for(var a=n.filter((function(e){return!!e}));a.length<e.length;)a.push(0);return t?a.reverse():a},j=function(e,t){return e.filter((function(e,n){return n>=t&&n<t+l}))},P=function(e,t){return e.filter((function(e,n){return(n-t)%l==0}))},U=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=x(j(w,t),n);r.map((function(n,r){return e[r+t]=n,n}))},W=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=x(P(w,t),n);r.map((function(n,r){return e[r*l+t]=n,n}))},L=function(){for(var e=new Array(B),t=0;t<B;t+=l)U(e,t);I(e)},M=function(){for(var e=new Array(B),t=0;t<B;t+=l)U(e,t,!0);I(e)},T=function(){for(var e=new Array(B),t=0;t<l;t++)W(e,t);I(e)},H=function(){for(var e=new Array(B),t=0;t<l;t++)W(e,t,!0);I(e)},K=function(e){if(e.filter((function(e){return!e})).length)return!1;for(var t=0;t<B;t+=l)for(var n=j(e,t),r=0;r<n.length-1;r++)if(n[r]===n[r+1])return!1;for(var o=0;o<l;o++)for(var a=P(e,o),c=0;c<a.length-1;c++)if(a[c]===a[c+1])return!1;return!0},Y=function(e){e.stopPropagation&&e.stopPropagation(),"ArrowLeft"!==e.code&&"KeyA"!==e.code||L(),"ArrowRight"!==e.code&&"KeyD"!==e.code||M(),"ArrowUp"!==e.code&&"KeyW"!==e.code||T(),"ArrowDown"!==e.code&&"KeyS"!==e.code||H()};return(0,r.useEffect)((function(){return document.addEventListener("keydown",Y),function(){document.removeEventListener("keydown",Y)}}),["keydown",Y]),(0,r.useEffect)((function(){var e=1,t=setInterval((function(){z&&!A&&(T(),e%3==0&&M(),e%2==0&&L(),e++)}),700);return function(){return clearInterval(t)}}),[z,A,c]),r.createElement("footer",{className:"footer"},r.createElement("div",{className:"footer__info"},"HOW TO PLAY: Use your arrow keys on keyboard or in app to move the tiles (w,a,s,d works too). Tiles with the same number merge into one when they touch. Add them up to reach 64 or 2048(can choose in menu)! You can continue to play after you have reached 64 or 2048. Auto play runs until game over(click play button). Also you can stop auto play clicking again same button. Step back button does step back))"),r.createElement("div",{className:"footer__bottom"},r.createElement("div",{className:"footer__links"},r.createElement("a",{href:"https://github.com/I-vasilich-I",className:"footer__link",target:"_blank",rel:"noreferrer"},r.createElement("img",{className:"github__logo",src:"assets/images/GitHub-Mark.png",alt:"Oleg Vaskevich"})),r.createElement("a",{href:"https://youtu.be/1bePpGUQ7lE",className:"footer__link youtube",target:"_blank",rel:"noreferrer"},r.createElement("img",{src:"assets/images/YouTube.svg",alt:"How to use"})),r.createElement("a",{href:"https://rs.school/js/",className:"footer__link",target:"_blank",rel:"noreferrer"},r.createElement("img",{src:"assets/images/rs_school_js.svg",alt:"The Rolling Scopes"}))),r.createElement("h3",null,"2021"),r.createElement("button",{type:"button",className:"button button--nav"},r.createElement(E.Z,{fontSize:"inherit",onClick:function(){return C(!z)}})),r.createElement("div",{className:"button__container"},r.createElement("button",{type:"button",className:"button button--nav item-b",onClick:L},r.createElement(v.Z,{fontSize:"large"})),r.createElement("button",{type:"button",className:"button button--nav item-a",onClick:T},r.createElement(g.Z,{fontSize:"large"})),r.createElement("button",{type:"button",className:"button button--nav item-d",onClick:M},r.createElement(h.Z,{fontSize:"large"})),r.createElement("button",{type:"button",className:"button button--nav item-c",onClick:H},r.createElement(y.Z,{fontSize:"large"})))))};var k=n(1120),_=n(6394),A=n(6775),B=n(4436),Z=n(6975),O=(0,k.Z)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,fontSize:"2rem"},label:{fontSize:"2rem"},select:{fontSize:"2rem"},menuItem:{fontSize:"2rem",backgroundColor:"#e0e0e0"},selectEmpty:{marginTop:e.spacing(2)}}}));function z(e){var t=O(),n=e.boardSize,o=e.setBoardSize,a=e.setHistory,l=e.setIsPopUpActive;return(0,r.useEffect)((function(){l(!1)}),[n]),r.createElement("div",null,r.createElement(B.Z,{className:t.formControl},r.createElement(_.Z,{className:t.label,id:"demo-simple-select-label"},"Board size"),r.createElement(Z.Z,{className:t.select,labelId:"demo-simple-select-label",id:"demo-simple-select",value:n,onChange:function(e){var t;o(e.target.value),t=e.target.value,a([{board:d(t*t),score:0,win:!1,gameOver:!1}])}},r.createElement(A.Z,{className:t.menuItem,value:3},"3x3"),r.createElement(A.Z,{className:t.menuItem,value:4},"4x4"),r.createElement(A.Z,{className:t.menuItem,value:5},"5x5"),r.createElement(A.Z,{className:t.menuItem,value:6},"6x6"))))}var C=n(1846),I=n(7162),x=n(6546),j=n(6019),P=(0,k.Z)((function(){return{formControl:{fontSize:"1.7rem"},label:{fontSize:"2rem"}}}));function U(e){var t=P(),n=e.winningNumber,o=e.setWinningNumber;return r.createElement(B.Z,{className:t.formControl,component:"fieldset"},r.createElement(j.Z,{className:t.formControl,component:"legend"},"Winning number"),r.createElement(I.Z,{className:t.formControl,row:!0,"aria-label":"winningNumber",name:"64",value:n,onChange:function(e){o(e.target.value)}},r.createElement(x.Z,{className:t.label,value:"64",control:r.createElement(C.Z,{className:t.label,color:"default"}),label:"64"}),r.createElement(x.Z,{className:t.label,value:"2048",control:r.createElement(C.Z,{className:t.label,color:"default"}),label:"2048"})))}var W=(0,k.Z)((function(){return{formControl:{fontSize:"1.7rem"},label:{fontSize:"2rem"}}}));function L(e){var t=W(),n=e.stepBackButton,o=e.setStepBackButton;return r.createElement(B.Z,{className:t.formControl,component:"fieldset"},r.createElement(j.Z,{className:t.formControl,component:"legend"},"Step back button"),r.createElement(I.Z,{className:t.formControl,row:!0,"aria-label":"stepBackButton",name:"stepBackButton",value:n,onChange:function(e){o(e.target.value)}},r.createElement(x.Z,{className:t.label,value:"1",control:r.createElement(C.Z,{className:t.label,color:"default"}),label:"On"}),r.createElement(x.Z,{className:t.label,value:"0",control:r.createElement(C.Z,{className:t.label,color:"default"}),label:"Off"})))}const M=function(e){var t=e.isPopUpActive,n=e.setIsPopUpActive,o=e.bestScore,a=e.boardSize,l=e.setBoardSize,c=e.setHistory,i=e.winningNumber,s=e.setWinningNumber,u=e.stepBackButton,m=e.setStepBackButton,f=t?"popup blackout":"popup popup--hidden",b=o.slice(o.length-10,o.length),d=function(e){"popup blackout"===e.target.className&&n(!1)};return(0,r.useEffect)((function(){return document.addEventListener("mousedown",d),function(){document.removeEventListener("mousedown",d)}}),["mousedown",d]),r.createElement("div",{className:f},r.createElement("div",{className:"popup__container"},r.createElement("div",{className:"radio"},r.createElement(U,{winningNumber:i,setWinningNumber:s})),r.createElement("div",{className:"radio"},r.createElement(L,{stepBackButton:u,setStepBackButton:m})),r.createElement(z,{setIsPopUpActive:n,boardSize:a,setBoardSize:l,setHistory:c}),r.createElement("div",{className:"best-score__list"},"Best score:",b.reverse().map((function(e,t){return r.createElement("div",{key:t+1,className:"best-score__item"},r.createElement("div",{className:"best-score__id"},t+1),r.createElement("div",{className:"best-score__score"},e))})))))};var T=n(8715),H=n(7812),K=n(6037),Y=n(366),$=(0,k.Z)((function(e){return{root:{width:"80%","& > * + *":{marginTop:e.spacing(2)},position:"absolute",top:0,left:"10%"},alert__text:{fontSize:"3rem",display:"flex",justifyContent:"space-evenly",alignItems:"center"}}}));function D(e){var t=$(),n=e.openWin,o=e.setOpenWin;return r.createElement("div",{className:t.root},r.createElement(K.Z,{in:n},r.createElement(T.Z,{severity:"success",className:t.alert__text,action:r.createElement(H.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){o(!1)}},r.createElement(Y.Z,{fontSize:"inherit"}))},"Congrats, you won!")))}function G(e){var t=$(),n=e.openLose,o=e.setOpenLose;return r.createElement("div",{className:t.root},r.createElement(K.Z,{in:n},r.createElement(T.Z,{severity:"error",className:t.alert__text,action:r.createElement(H.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){o(!1)}},r.createElement(Y.Z,{fontSize:"inherit"}))},"Sorry, you lose. Better luck next time.")))}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const q=function(){var e=J((0,r.useState)(4),2),t=e[0],n=e[1],o=J((0,r.useState)(m("bestScore")||[0]),2),l=o[0],c=o[1],i=m("2048-history"),s=i&&i[i.length-1].board.length===t*t,u=J((0,r.useState)(i&&s?i:[{board:d(t*t),score:0,win:!1,gameOver:!1}]),2),f=u[0],b=u[1],v=J((0,r.useState)(!1),2),h=v[0],y=v[1],g=J((0,r.useState)(!1),2),E=g[0],S=g[1],N=J((0,r.useState)(!1),2),k=N[0],_=N[1],A=J((0,r.useState)("2048"),2),B=A[0],Z=A[1],O=J((0,r.useState)("0"),2),z=O[0],C=O[1];return r.createElement("div",{className:"App"},r.createElement("h1",{className:"hidden"},"2048"),r.createElement(D,{openWin:E,setOpenWin:S}),r.createElement(G,{openLose:k,setOpenLose:_}),r.createElement(M,{boardSize:t,setBoardSize:n,setHistory:b,bestScore:l,isPopUpActive:h,setIsPopUpActive:y,winningNumber:B,setWinningNumber:Z,stepBackButton:z,setStepBackButton:C}),r.createElement(p,{bestScore:l,boardSize:t,setBoardSize:n,history:f,setHistory:b,isPopUpActive:h,setIsPopUpActive:y,stepBackButton:z}),r.createElement(a,{history:f,boardSize:t}),r.createElement(w,{bestScore:l,setBestScore:c,boardSize:t,history:f,setHistory:b,setOpenWin:S,setOpenLose:_,winningNumber:B}))};o.render(r.createElement(q,null),document.getElementById("root"))},6277:()=>{}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.x=e=>{},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0},t=[[6981,505],[9057,505],[6277,505]],r=e=>{},o=(o,a)=>{for(var l,c,[i,s,u,m]=a,f=0,b=[];f<i.length;f++)c=i[f],n.o(e,c)&&e[c]&&b.push(e[c][0]),e[c]=0;for(l in s)n.o(s,l)&&(n.m[l]=s[l]);for(u&&u(n),o&&o(a);b.length;)b.shift()();return m&&t.push.apply(t,m),r()},a=self.webpackChunkgame=self.webpackChunkgame||[];function l(){for(var r,o=0;o<t.length;o++){for(var a=t[o],l=!0,c=1;c<a.length;c++){var i=a[c];0!==e[i]&&(l=!1)}l&&(t.splice(o--,1),r=n(n.s=a[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),r}a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a));var c=n.x;n.x=()=>(n.x=c||(e=>{}),(r=l)())})(),n.x()})();