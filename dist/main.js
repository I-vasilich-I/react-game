(()=>{"use strict";var e={9646:(e,t,r)=>{var n=r(7294),o=r(3935);const a=function(e){var t=e.history,r=e.boardSize,o=t[t.length-1].board,a={4:"tile",3:"tile tile--3",5:"tile tile--5",6:"tile tile--6"},c="board".concat(4!==r?" board-".concat(r):""),i=function(e){return e||""};return n.createElement("main",{className:"main"},n.createElement("section",{className:c},o.map((function(e,t){return n.createElement("div",{key:t,className:"".concat(a[r]," tile--").concat(i(e)?i(e):0)},i(e))}))))};var c=r(7168),i=r(2046),l=r(7118),s=r(8884);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(e){return JSON.parse(localStorage.getItem(e))||null},f=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},d=function(e){var t,r=function(e){if(Array.isArray(e))return u(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=function(e){return e.map((function(e,t){return e?-1:t})).filter((function(e){return-1!==e}))}(e);if(!n.length)return-1;var o,a=Math.floor(Math.random()<.8?2:4);return r[n[(o=n.length,Math.floor(Math.random()*Math.floor(o)))]]=a,r},v=function(e){return d(d(Array(e).fill(0)))};const p=function(e){var t=e.setIsPopUpActive,r=e.bestScore,o=e.boardSize,a=e.history,u=e.setHistory,m=r?r[r.length-1]:0,d=a[a.length-1].score;return n.createElement("header",{className:"header"},n.createElement("div",{className:"header__top"},n.createElement("h2",{className:"logo"},"2048"),n.createElement("div",{className:"score__container"},n.createElement("div",{className:"score"},n.createElement("p",{className:"score__title"},"Score"),n.createElement("p",{className:"score__count"},d)),n.createElement("div",{className:"score"},n.createElement("p",{className:"score__title"},"Best score"),n.createElement("p",{className:"score__count"},m)))),n.createElement("div",{className:"header__bottom"},n.createElement("button",{type:"button",className:"button button--nav",onClick:function(){t(!0)}},n.createElement(s.Z,{fontSize:"inherit"})),n.createElement("button",{type:"button",className:"button button--nav",onClick:function(){u([{board:v(o*o),score:0,win:!1,gameOver:!1}])}},n.createElement(i.Z,{fontSize:"inherit"})),n.createElement("button",{type:"button",className:"button button--nav",onClick:function(){a.length<2||(u(a.slice(0,a.length-1)),f("2048-history",a.slice(0,a.length-1)))}},n.createElement(c.Z,{fontSize:"inherit"})),n.createElement("button",{type:"button",className:"button  button--nav",onClick:function(){document.body.requestFullscreen()}},n.createElement(l.Z,{fontSize:"inherit"}))))};var b=r(9826),y=r(9973),h=r(1673),g=r(9594),E=r(8735);function S(e,t){if(e){if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const _=function(e){var t,r,o=e.bestScore,a=e.setBestScore,c=e.boardSize,i=e.history,l=e.setHistory,s=e.setOpenWin,u=e.setOpenLose,m=o[o.length-1]?o[o.length-1]:0,v=i[i.length-1],p=v.board,_=v.score,w=v.win,A=v.gameOver,k=c*c,O=0,z=(t=(0,n.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}}(t,r)||S(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),I=z[0],C=z[1],Z=function(e){var t,r,n={resultBoard:null,winCheck:null,gameOver:null};if(r=p,e.toString()!==r.toString()){var c=d(e);n.resultBoard=-1!==c?c:e,(t=function(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.resultBoard).sort((function(e,t){return e-t})))[t.length-1]>=64&&!w&&(n.winCheck=!0,s(!0)),W(n.resultBoard)&&(n.gameOver=(A||(u(!0),C(!1)),!0)),A||(l(i.concat({board:n.resultBoard||p,score:_+O,win:n.winCheck||w,gameOver:n.gameOver||A})),f("2048-history",i.concat({board:n.resultBoard||p,score:_+O,win:n.winCheck||w,gameOver:n.gameOver||A})))}var v=_+O>m?_+O:null;v&&(a(o.concat(v)),f("bestScore",o.concat(v)))},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.filter((function(e){return!!e}));t&&r.reverse();for(var n=0;n<r.length;n++)if(r[n]===r[n+1]){O+=r[n]+r[n+1];var o=[r[n]+r[n+1],0];r[n]=o[0],r[n+1]=o[1]}for(var a=r.filter((function(e){return!!e}));a.length<e.length;)a.push(0);return t?a.reverse():a},j=function(e,t){return e.filter((function(e,r){return r>=t&&r<t+c}))},B=function(e,t){return e.filter((function(e,r){return(r-t)%c==0}))},P=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=x(j(p,t),r);n.map((function(r,n){return e[n+t]=r,r}))},U=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=x(B(p,t),r);n.map((function(r,n){return e[n*c+t]=r,r}))},L=function(){for(var e=new Array(k),t=0;t<k;t+=c)P(e,t);Z(e)},M=function(){for(var e=new Array(k),t=0;t<k;t+=c)P(e,t,!0);Z(e)},T=function(){for(var e=new Array(k),t=0;t<c;t++)U(e,t);Z(e)},H=function(){for(var e=new Array(k),t=0;t<c;t++)U(e,t,!0);Z(e)},W=function(e){if(e.filter((function(e){return!e})).length)return!1;for(var t=0;t<k;t+=c)for(var r=j(e,t),n=0;n<r.length-1;n++)if(r[n]===r[n+1])return!1;for(var o=0;o<c;o++)for(var a=B(e,o),i=0;i<a.length-1;i++)if(a[i]===a[i+1])return!1;return!0},K=function(e){e.stopPropagation&&e.stopPropagation(),"ArrowLeft"!==e.code&&"KeyA"!==e.code||L(),"ArrowRight"!==e.code&&"KeyD"!==e.code||M(),"ArrowUp"!==e.code&&"KeyW"!==e.code||T(),"ArrowDown"!==e.code&&"KeyS"!==e.code||H()};return(0,n.useEffect)((function(){return document.addEventListener("keydown",K),function(){document.removeEventListener("keydown",K)}}),["keydown",K]),(0,n.useEffect)((function(){var e=1,t=setInterval((function(){I&&!A&&(T(),e%3==0&&M(),e%2==0&&L(),e++)}),700);return function(){return clearInterval(t)}}),[I,A,i]),n.createElement("footer",{className:"footer"},n.createElement("div",{className:"footer__info"},"HOW TO PLAY: Use your arrow keys on keyboard or in app to move the tiles (w,a,s,d works too). Tiles with the same number merge into one when they touch. Add them up to reach 64(2048 hard to test)! You can continue to play after you have reached 64(2048 hard to test). Auto play runs until game over(click play button). Also you can stop auto play clicking again same button."),n.createElement("div",{className:"footer__bottom"},n.createElement("div",{className:"footer__links"},n.createElement("a",{href:"https://github.com/I-vasilich-I",className:"footer__link",target:"_blank",rel:"noreferrer"},n.createElement("img",{className:"github__logo",src:"assets/images/GitHub-Mark.png",alt:"Oleg Vaskevich"})),n.createElement("a",{href:"https://rs.school/js/",className:"footer__link",target:"_blank",rel:"noreferrer"},n.createElement("img",{src:"assets/images/rs_school_js.svg",alt:"The Rolling Scopes"}))),n.createElement("h3",null,"2021"),n.createElement("button",{type:"button",className:"button button--nav"},n.createElement(E.Z,{fontSize:"inherit",onClick:function(){return C(!I)}})),n.createElement("div",{className:"button__container"},n.createElement("button",{type:"button",className:"button button--nav item-b",onClick:L},n.createElement(b.Z,{fontSize:"large"})),n.createElement("button",{type:"button",className:"button button--nav item-a",onClick:T},n.createElement(g.Z,{fontSize:"large"})),n.createElement("button",{type:"button",className:"button button--nav item-d",onClick:M},n.createElement(y.Z,{fontSize:"large"})),n.createElement("button",{type:"button",className:"button button--nav item-c",onClick:H},n.createElement(h.Z,{fontSize:"large"})))))};var w=r(1120),A=r(3700),k=r(6775),O=r(4436),z=r(6975),I=(0,w.Z)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,fontSize:"2rem"},label:{fontSize:"2rem"},select:{fontSize:"2rem"},menuItem:{fontSize:"2rem",backgroundColor:"#e0e0e0"},selectEmpty:{marginTop:e.spacing(2)}}}));function C(e){var t=I(),r=e.boardSize,o=e.setBoardSize,a=e.setHistory,c=e.setIsPopUpActive;return(0,n.useEffect)((function(){c(!1)}),[r]),n.createElement("div",null,n.createElement(O.Z,{className:t.formControl},n.createElement(A.Z,{className:t.label,id:"demo-simple-select-label"},"Board size"),n.createElement(z.Z,{className:t.select,labelId:"demo-simple-select-label",id:"demo-simple-select",value:r,onChange:function(e){var t;o(e.target.value),t=e.target.value,a([{board:v(t*t),score:0,win:!1,gameOver:!1}])}},n.createElement(k.Z,{className:t.menuItem,value:3},"3x3"),n.createElement(k.Z,{className:t.menuItem,value:4},"4x4"),n.createElement(k.Z,{className:t.menuItem,value:5},"5x5"),n.createElement(k.Z,{className:t.menuItem,value:6},"6x6"))))}const Z=function(e){var t=e.isPopUpActive,r=e.setIsPopUpActive,o=e.bestScore,a=e.boardSize,c=e.setBoardSize,i=e.setHistory,l=t?"popup blackout":"popup popup--hidden",s=o.slice(o.length-10,o.length),u=function(e){"popup blackout"===e.target.className&&r(!1)};return(0,n.useEffect)((function(){return document.addEventListener("mousedown",u),function(){document.removeEventListener("mousedown",u)}}),["mousedown",u]),n.createElement("div",{className:l},n.createElement("div",{className:"popup__container"},n.createElement(C,{setIsPopUpActive:r,boardSize:a,setBoardSize:c,setHistory:i}),n.createElement("div",{className:"best-score__list"},"Best score:",s.reverse().map((function(e,t){return n.createElement("div",{key:t+1,className:"best-score__item"},n.createElement("div",{className:"best-score__id"},t+1),n.createElement("div",{className:"best-score__score"},e))})))))};var x=r(8715),j=r(7812),B=r(6037),P=r(366),U=(0,w.Z)((function(e){return{root:{width:"80%","& > * + *":{marginTop:e.spacing(2)},position:"absolute",top:0,left:"10%"},alert__text:{fontSize:"3rem",display:"flex",justifyContent:"space-evenly",alignItems:"center"}}}));function L(e){var t=U(),r=e.openWin,o=e.setOpenWin;return n.createElement("div",{className:t.root},n.createElement(B.Z,{in:r},n.createElement(x.Z,{severity:"success",className:t.alert__text,action:n.createElement(j.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){o(!1)}},n.createElement(P.Z,{fontSize:"inherit"}))},"Congrats, you won!")))}function M(e){var t=U(),r=e.openLose,o=e.setOpenLose;return n.createElement("div",{className:t.root},n.createElement(B.Z,{in:r},n.createElement(x.Z,{severity:"error",className:t.alert__text,action:n.createElement(j.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){o(!1)}},n.createElement(P.Z,{fontSize:"inherit"}))},"Sorry, you lose. Better luck next time.")))}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const W=function(){var e=T((0,n.useState)(4),2),t=e[0],r=e[1],o=T((0,n.useState)(m("bestScore")||[0]),2),c=o[0],i=o[1],l=m("2048-history"),s=l&&l[l.length-1].board.length===t*t,u=T((0,n.useState)(l&&s?l:[{board:v(t*t),score:0,win:!1,gameOver:!1}]),2),f=u[0],d=u[1],b=T((0,n.useState)(!1),2),y=b[0],h=b[1],g=T((0,n.useState)(!1),2),E=g[0],S=g[1],N=T((0,n.useState)(!1),2),w=N[0],A=N[1];return n.createElement("div",{className:"App"},n.createElement("h1",{className:"hidden"},"2048"),n.createElement(L,{openWin:E,setOpenWin:S}),n.createElement(M,{openLose:w,setOpenLose:A}),n.createElement(Z,{boardSize:t,setBoardSize:r,setHistory:d,bestScore:c,isPopUpActive:y,setIsPopUpActive:h}),n.createElement(p,{bestScore:c,boardSize:t,setBoardSize:r,history:f,setHistory:d,isPopUpActive:y,setIsPopUpActive:h}),n.createElement(a,{history:f,boardSize:t}),n.createElement(_,{bestScore:c,setBestScore:i,boardSize:t,history:f,setHistory:d,setOpenWin:S,setOpenLose:A}))};o.render(n.createElement(W,null),document.getElementById("root"))},6277:()=>{}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.m=e,r.x=e=>{},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0},t=[[6981,583],[9646,583],[6277,583]],n=e=>{},o=(o,a)=>{for(var c,i,[l,s,u,m]=a,f=0,d=[];f<l.length;f++)i=l[f],r.o(e,i)&&e[i]&&d.push(e[i][0]),e[i]=0;for(c in s)r.o(s,c)&&(r.m[c]=s[c]);for(u&&u(r),o&&o(a);d.length;)d.shift()();return m&&t.push.apply(t,m),n()},a=self.webpackChunkgame=self.webpackChunkgame||[];function c(){for(var n,o=0;o<t.length;o++){for(var a=t[o],c=!0,i=1;i<a.length;i++){var l=a[i];0!==e[l]&&(c=!1)}c&&(t.splice(o--,1),n=r(r.s=a[0]))}return 0===t.length&&(r.x(),r.x=e=>{}),n}a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a));var i=r.x;r.x=()=>(r.x=i||(e=>{}),(n=c)())})(),r.x()})();