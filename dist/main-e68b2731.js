(()=>{"use strict";var e={8733:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(7294);const o=function(e){var t=e.history,r=e.boardSize,o=t[t.length-1].board,a={4:"tile",3:"tile tile--3",5:"tile tile--5",6:"tile tile--6"},c="board".concat(4!==r?" board-".concat(r):""),i=function(e){return e||""};return n.createElement("main",{className:"main"},n.createElement("section",{className:c},o.map((function(e,t){return n.createElement("div",{key:t,className:"".concat(a[r]," tile--").concat(i(e)?i(e):0)},i(e))}))))};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){return JSON.parse(localStorage.getItem(e))||null},i=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},s=function(e){var t,r=function(e){if(Array.isArray(e))return a(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=function(e){return e.map((function(e,t){return e?-1:t})).filter((function(e){return-1!==e}))}(e);if(!n.length)return-1;var o,c=Math.floor(Math.random()<.8?2:4);return r[n[(o=n.length,Math.floor(Math.random()*Math.floor(o)))]]=c,r},u=function(e){return s(s(Array(e).fill(0)))};const l=function(e){var t=e.setIsPopUpActive,r=e.bestScore,o=e.boardSize,a=e.history,c=e.setHistory,s=r?r[r.length-1]:0,l=a[a.length-1].score;return n.createElement("header",{className:"header"},n.createElement("div",{className:"header__top"},n.createElement("h2",{className:"logo"},"2048"),n.createElement("div",{className:"score__container"},n.createElement("div",{className:"score"},n.createElement("p",{className:"score__title"},"Score"),n.createElement("p",{className:"score__count"},l)),n.createElement("div",{className:"score"},n.createElement("p",{className:"score__title"},"Best score"),n.createElement("p",{className:"score__count"},s)))),n.createElement("div",{className:"header__bottom"},n.createElement("button",{type:"button",className:"button button--nav",onClick:function(){t(!0)}}),n.createElement("button",{type:"button",className:"button button--nav",onClick:function(){c([{board:u(o*o),score:0,win:!1,gameOver:!1}])}}),n.createElement("button",{type:"button",className:"button button--nav",onClick:function(){a.length<2||(c(a.slice(0,a.length-1)),i("2048-history",a.slice(0,a.length-1)))}}),n.createElement("button",{type:"button",className:"button  button--nav",onClick:function(){document.body.requestFullscreen()}})))};function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const f=function(e){var t=e.bestScore,r=e.setBestScore,o=e.boardSize,a=e.history,c=e.setHistory,u=t[t.length-1]?t[t.length-1]:0,l=a[a.length-1],f=l.board,d=l.score,b=l.win,v=l.gameOver,p=o*o,h=0,y=function(e){var n,o,l,p,y={resultBoard:null,winCheck:null,gameOver:null};if(l=f,e.toString()!==l.toString()){var g=s(e);y.resultBoard=-1!==g?g:e,n=y.resultBoard,(o=(p=n,function(e){if(Array.isArray(e))return m(e)}(p)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(p)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort((function(e,t){return e-t})))[o.length-1]>=64&&!b&&(y.winCheck=!0,alert("Congrats, you won! You can continue playing or start new game.")),C(y.resultBoard)&&(y.gameOver=(v||alert("Game over. Your score is ".concat(d)),!0)),v||(c(a.concat({board:y.resultBoard||f,score:d+h,win:y.winCheck||b,gameOver:y.gameOver||v})),i("2048-history",a.concat({board:y.resultBoard||f,score:d+h,win:y.winCheck||b,gameOver:y.gameOver||v})))}var E=d+h>u?d+h:null;E&&(r(t.concat(E)),i("bestScore",t.concat(E)))},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.filter((function(e){return!!e}));t&&r.reverse();for(var n=0;n<r.length;n++)if(r[n]===r[n+1]){h+=r[n]+r[n+1];var o=[r[n]+r[n+1],0];r[n]=o[0],r[n+1]=o[1]}for(var a=r.filter((function(e){return!!e}));a.length<e.length;)a.push(0);return t?a.reverse():a},E=function(e,t){return e.filter((function(e,r){return r>=t&&r<t+o}))},S=function(e,t){return e.filter((function(e,r){return(r-t)%o==0}))},w=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=g(E(f,t),r);n.map((function(r,n){return e[n+t]=r,r}))},A=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=g(S(f,t),r);n.map((function(r,n){return e[n*o+t]=r,r}))},N=function(){for(var e=new Array(p),t=0;t<p;t+=o)w(e,t);y(e)},_=function(){for(var e=new Array(p),t=0;t<p;t+=o)w(e,t,!0);y(e)},k=function(){for(var e=new Array(p),t=0;t<o;t++)A(e,t);y(e)},O=function(){for(var e=new Array(p),t=0;t<o;t++)A(e,t,!0);y(e)},C=function(e){if(e.filter((function(e){return!e})).length)return!1;for(var t=0;t<p;t+=o)for(var r=E(e,t),n=0;n<r.length-1;n++)if(r[n]===r[n+1])return!1;for(var a=0;a<o;a++)for(var c=S(e,a),i=0;i<c.length-1;i++)if(c[i]===c[i+1])return!1;return!0},I=function(e){e.stopPropagation&&e.stopPropagation(),"ArrowLeft"!==e.code&&"KeyA"!==e.code||N(),"ArrowRight"!==e.code&&"KeyD"!==e.code||_(),"ArrowUp"!==e.code&&"KeyW"!==e.code||k(),"ArrowDown"!==e.code&&"KeyS"!==e.code||O()};return(0,n.useEffect)((function(){return document.addEventListener("keydown",I),function(){document.removeEventListener("keydown",I)}}),["keydown",I]),n.createElement("footer",{className:"footer"},n.createElement("div",{className:"footer__info"},"HOW TO PLAY: Use your arrow keys on keyboard or in app to move the tiles (w,a,s,d works too). Tiles with the same number merge into one when they touch. Add them up to reach 64(2048 hard to test)! You can continue to play after you have reached 64(2048 hard to test)."),n.createElement("div",{className:"footer__bottom"},n.createElement("button",{type:"button",className:"button button--nav"}),n.createElement("div",{className:"button__container"},n.createElement("button",{type:"button",className:"button button--nav item-b",onClick:N}),n.createElement("button",{type:"button",className:"button button--nav item-a",onClick:k}),n.createElement("button",{type:"button",className:"button button--nav item-d",onClick:_}),n.createElement("button",{type:"button",className:"button button--nav item-c",onClick:O}))))},d=function(e){var t=e.isPopUpActive,r=e.setIsPopUpActive,o=e.bestScore,a=t?"popup blackout":"popup popup--hidden",c=o.slice(o.length-10,o.length),i=function(e){"popup blackout"===e.target.className&&r(!1)};return(0,n.useEffect)((function(){return document.addEventListener("mousedown",i),function(){document.removeEventListener("mousedown",i)}}),["mousedown",i]),n.createElement("div",{className:a},n.createElement("div",{className:"popup__container"},n.createElement("div",{className:"best-score__list"},"Best score:",c.reverse().map((function(e,t){return n.createElement("div",{key:t+1,className:"best-score__item"},n.createElement("div",{className:"best-score__id"},t+1),n.createElement("div",{className:"best-score__score"},e))})))))};function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const p=function(){var e=b((0,n.useState)(4),2),t=e[0],r=e[1],a=b((0,n.useState)(c("bestScore")||[0]),2),i=a[0],s=a[1],m=c("2048-history"),v=m&&m[m.length-1].board.length===t*t,p=b((0,n.useState)(m&&v?m:[{board:u(t*t),score:0,win:!1,gameOver:!1}]),2),h=p[0],y=p[1],g=b((0,n.useState)(!1),2),E=g[0],S=g[1];return n.createElement("div",{className:"App"},n.createElement("h1",{className:"hidden"},"2048"),n.createElement(d,{boardSize:t,setBoardSize:r,setHistory:y,bestScore:i,isPopUpActive:E,setIsPopUpActive:S}),n.createElement(l,{bestScore:i,boardSize:t,setBoardSize:r,history:h,setHistory:y,isPopUpActive:E,setIsPopUpActive:S}),n.createElement(o,{history:h,boardSize:t}),n.createElement(f,{bestScore:i,setBestScore:s,boardSize:t,history:h,setHistory:y}))}}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.m=e,r.x=e=>{},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={509:0},t=[[6981,165,107,61,474,686,512,188,186,100,659,145],[3477,165,107,61,474,686,512,188,186,100,659,145],[6277,165,107,61,474,686,512,188,186,100,659,145]],n=e=>{},o=(o,a)=>{for(var c,i,[s,u,l,m]=a,f=0,d=[];f<s.length;f++)i=s[f],r.o(e,i)&&e[i]&&d.push(e[i][0]),e[i]=0;for(c in u)r.o(u,c)&&(r.m[c]=u[c]);for(l&&l(r),o&&o(a);d.length;)d.shift()();return m&&t.push.apply(t,m),n()},a=self.webpackChunkgame=self.webpackChunkgame||[];function c(){for(var n,o=0;o<t.length;o++){for(var a=t[o],c=!0,i=1;i<a.length;i++){var s=a[i];0!==e[s]&&(c=!1)}c&&(t.splice(o--,1),n=r(r.s=a[0]))}return 0===t.length&&(r.x(),r.x=e=>{}),n}a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a));var i=r.x;r.x=()=>(r.x=i||(e=>{}),(n=c)())})(),r.x()})();